{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/rutviks/OneDrive - infopercept.com/Desktop/New folder/best-fed-greeks-app-full-source/best-fed-greeks-app-full-source/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { forwardRef, ElementRef, Renderer2 } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ModalController } from '@ionic/angular';\nimport { Ionic4DatepickerModalComponent } from './ionic4-datepicker-modal/ionic4-datepicker-modal.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/forms\";\nconst noop = () => {};\nexport const CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => Ionic4DatepickerComponent),\n  multi: true\n};\nexport let Ionic4DatepickerComponent = /*#__PURE__*/(() => {\n  class Ionic4DatepickerComponent {\n    modalCtrl;\n    el;\n    renderer2;\n    inputDateConfig;\n    closeIcon;\n    selectedDate = {};\n    innerValue = '';\n    _pickerOpened = false;\n    // Placeholders for the callbacks which are later provided\n    // by the Control Value Accessor\n    onTouchedCallback = noop;\n    onChangeCallback = noop;\n    constructor(modalCtrl, el, renderer2) {\n      this.modalCtrl = modalCtrl;\n      this.el = el;\n      this.renderer2 = renderer2;\n    }\n    ngOnInit() {\n      if (this.inputDateConfig.clearButton !== false) {\n        this.closeIcon = document.createElement('ion-icon');\n        this.closeIcon.name = 'close-circle';\n        this.closeIcon.className = 'clearButton';\n        this.closeIcon.style.position = 'absolute';\n        this.closeIcon.style.right = '8px';\n        this.closeIcon.style.bottom = '0px';\n        this.closeIcon.style.fontSize = '18px';\n        this.closeIcon.style.color = '#A9A9A9';\n        this.closeIcon.style.zIndex = '5';\n        if (this.el.nativeElement.parentNode.nodeName === 'ION-ITEM') {\n          this.closeIcon.style.bottom = '30%';\n        }\n        this.el.nativeElement.setAttribute('style', 'position: relative; width: 100%;');\n        this.el.nativeElement.appendChild(this.closeIcon);\n        this.renderer2.listen(this.closeIcon, 'click', event => {\n          // Do something with 'event'\n          // console.log('button clicks');\n          this.selectedDate = new Date();\n          this.value = '';\n        });\n      }\n    }\n    onChangeValue(value) {\n      // console.log('onChangeValue =>' , value);\n      if (this.inputDateConfig.clearButton !== false) {\n        if (!value) {\n          this.closeIcon.style.visibility = 'hidden';\n        } else {\n          this.closeIcon.style.visibility = 'visible';\n        }\n      }\n    }\n    openDatePicker(value) {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        // console.log('openDatePicker');\n        if (_this._pickerOpened) return;\n        _this._pickerOpened = true;\n        if (value) {\n          _this.selectedDate.date = value;\n        }\n        const datePickerModal = yield _this.modalCtrl.create({\n          component: Ionic4DatepickerModalComponent,\n          cssClass: 'li-ionic4-datePicker',\n          componentProps: {\n            'objConfig': _this.inputDateConfig,\n            'selectedDate': _this.selectedDate.date\n          }\n        });\n        yield datePickerModal.present();\n        datePickerModal.onDidDismiss().then(data => {\n          _this._pickerOpened = false;\n          // console.log(data);\n          if (data.data && data.data.date && data.data.date !== 'Invalid date') {\n            _this.selectedDate.date = data.data.date;\n            _this.value = data.data.date;\n          }\n        });\n      })();\n    }\n    // get accessor\n    get value() {\n      return this.innerValue;\n    }\n    // set accessor including call the onchange callback\n    set value(v) {\n      if (v !== this.innerValue) {\n        this.innerValue = v;\n        this.onChangeCallback(v);\n      }\n      this.onChangeValue(v);\n    }\n    // Set touched on blur\n    onBlur() {\n      this.onTouchedCallback();\n    }\n    // From ControlValueAccessor interface\n    writeValue(value) {\n      if (value !== this.innerValue) {\n        this.innerValue = value;\n      }\n      this.onChangeValue(value);\n    }\n    // From ControlValueAccessor interface\n    registerOnChange(fn) {\n      this.onChangeCallback = fn;\n    }\n    // From ControlValueAccessor interface\n    registerOnTouched(fn) {\n      this.onTouchedCallback = fn;\n    }\n    static ɵfac = function Ionic4DatepickerComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || Ionic4DatepickerComponent)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: Ionic4DatepickerComponent,\n      selectors: [[\"li-ionic4-datepicker\"]],\n      inputs: {\n        inputDateConfig: \"inputDateConfig\"\n      },\n      standalone: false,\n      features: [i0.ɵɵProvidersFeature([CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR])],\n      decls: 1,\n      vars: 1,\n      consts: [[\"type\", \"text\", \"readonly\", \"\", \"start\", \"\", 1, \"li-dp-input\", 3, \"focus\", \"click\", \"ngModelChange\", \"ngModel\"]],\n      template: function Ionic4DatepickerComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"input\", 0);\n          i0.ɵɵlistener(\"focus\", function Ionic4DatepickerComponent_Template_input_focus_0_listener($event) {\n            return $event.preventDefault();\n          })(\"click\", function Ionic4DatepickerComponent_Template_input_click_0_listener() {\n            return ctx.openDatePicker(ctx.value);\n          });\n          i0.ɵɵtwoWayListener(\"ngModelChange\", function Ionic4DatepickerComponent_Template_input_ngModelChange_0_listener($event) {\n            i0.ɵɵtwoWayBindingSet(ctx.value, $event) || (ctx.value = $event);\n            return $event;\n          });\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵtwoWayProperty(\"ngModel\", ctx.value);\n        }\n      },\n      dependencies: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel],\n      styles: [\"[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;margin:6px 0;border:0;border-bottom:1px solid #ccc;width:100%;padding:12px}@media(min-width:768px){[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:18px}}[_nghost-%COMP%]   input.has-focus[_ngcontent-%COMP%], [_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0;box-shadow:unset}\"]\n    });\n  }\n  return Ionic4DatepickerComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}