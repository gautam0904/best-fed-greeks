{"ast":null,"code":"import _asyncToGenerator from \"/Users/malaviyagautam/Code/JS/MEAN/Ionic/FULL Source Code & Database/ionic-project-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ElementRef, Renderer2 } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { Ionic4DatepickerModalComponent } from './ionic4-datepicker-modal/ionic4-datepicker-modal.component';\nimport { NgModel, NgControl } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/forms\";\nexport let LiIonic4DatepickerDirective = /*#__PURE__*/(() => {\n  class LiIonic4DatepickerDirective {\n    modalCtrl;\n    ngModel;\n    control;\n    el;\n    renderer2;\n    inputDateConfig;\n    closeIcon;\n    selectedDate = {};\n    // isModalOpen: any = false;\n    constructor(modalCtrl, ngModel, control, el, renderer2) {\n      this.modalCtrl = modalCtrl;\n      this.ngModel = ngModel;\n      this.control = control;\n      this.el = el;\n      this.renderer2 = renderer2;\n    }\n    ngOnInit() {\n      // console.log('config.yearInAscending : ' + this.inputDateConfig.yearInAscending);\n      if (this.inputDateConfig.clearButton !== false) {\n        this.closeIcon = document.createElement('ion-icon');\n        this.closeIcon.name = 'close-circle';\n        this.closeIcon.className = 'clearButton';\n        this.closeIcon.style.position = 'absolute';\n        this.closeIcon.style.right = '8px';\n        this.closeIcon.style.bottom = '30%';\n        this.closeIcon.style.fontSize = '18px';\n        this.closeIcon.style.color = '#A9A9A9';\n        this.closeIcon.style.zIndex = '5';\n        if (this.el.nativeElement.parentNode.nodeName === 'ION-ITEM') {\n          this.closeIcon.style.bottom = '12px';\n        }\n        this.el.nativeElement.parentNode.appendChild(this.closeIcon);\n        this.renderer2.listen(this.closeIcon, 'click', event => {\n          // Do something with 'event'\n          // console.log('button clicks');\n          this.selectedDate.date = new Date();\n          this.control.control.setValue('');\n          this.ngModel.update.emit('');\n        });\n      }\n      const self = this;\n      this.ngModel.valueChanges.subscribe(value => {\n        // console.log('ngModel value =>', value);\n        self.selectedDate.date = value;\n        if (this.inputDateConfig.clearButton !== false) {\n          if (!value) {\n            this.closeIcon.style.visibility = 'hidden';\n          } else {\n            this.closeIcon.style.visibility = 'visible';\n          }\n        }\n      });\n      this.control.control.valueChanges.subscribe(value => {\n        // console.log('formcontrol value =>', value);\n        self.selectedDate.date = value;\n        if (this.inputDateConfig.clearButton !== false) {\n          if (!value) {\n            this.closeIcon.style.visibility = 'hidden';\n          } else {\n            this.closeIcon.style.visibility = 'visible';\n          }\n        }\n      });\n      if (this.control.control.value) {\n        this.selectedDate.date = this.control.control.value;\n      }\n    }\n    // @HostListener('click')\n    // onClick() {\n    //   // console.log('on click of component =>', this.inputDateConfig);\n    //   if (!this.isModalOpen) {\n    //     this.isModalOpen = true;\n    //     this.openDatePicker();\n    //   }\n    // }\n    onFocus() {\n      // if (!this.isModalOpen) {\n      // this.isModalOpen = true;\n      this.openDatePicker();\n      // }\n    }\n    openDatePicker() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        // console.log('openDatePicker');\n        const datePickerModal = yield _this.modalCtrl.create({\n          component: Ionic4DatepickerModalComponent,\n          cssClass: 'li-ionic4-datePicker',\n          componentProps: {\n            'objConfig': _this.inputDateConfig,\n            'selectedDate': _this.selectedDate.date\n          }\n        });\n        yield datePickerModal.present();\n        datePickerModal.onDidDismiss().then(data => {\n          // this.isModalOpen = false;\n          if (data.data && data.data.date && data.data.date !== 'Invalid date') {\n            _this.selectedDate.date = data.data.date;\n            _this.control.control.setValue(data.data.date);\n            _this.ngModel.update.emit(data.data.date);\n          }\n        });\n      })();\n    }\n    static ɵfac = function LiIonic4DatepickerDirective_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || LiIonic4DatepickerDirective)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.NgModel), i0.ɵɵdirectiveInject(i2.NgControl), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2));\n    };\n    static ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n      type: LiIonic4DatepickerDirective,\n      selectors: [[\"\", \"liIonic4Datepicker\", \"\"]],\n      hostBindings: function LiIonic4DatepickerDirective_HostBindings(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵlistener(\"ionFocus\", function LiIonic4DatepickerDirective_ionFocus_HostBindingHandler() {\n            return ctx.onFocus();\n          });\n        }\n      },\n      inputs: {\n        inputDateConfig: [0, \"liIonic4Datepicker\", \"inputDateConfig\"]\n      },\n      exportAs: [\"liIonic4Datepicker\"],\n      standalone: false,\n      features: [i0.ɵɵProvidersFeature([NgModel])]\n    });\n  }\n  return LiIonic4DatepickerDirective;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}